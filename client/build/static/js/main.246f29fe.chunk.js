(this["webpackJsonpphonebook-front"]=this["webpackJsonpphonebook-front"]||[]).push([[0],{46:function(e,t,a){e.exports=a(73)},47:function(e,t,a){},73:function(e,t,a){"use strict";a.r(t);a(47);var n=a(0),l=a.n(n),r=a(19),c=a.n(r),o=a(15),u=a(31),m=a.n(u),i=a(44),s=a(13),E=a(7),d=a(11),f=a(18),p=a(21),h=function(e,t){return t.map((function(e){return e.name})).includes(e)},b=a(17),v=function(e){var t=e.title,a=e.main,r=e.button,c=e.show,u=e.okButton,m=e.okCallBack,i=Object(n.useState)(!1),s=Object(o.a)(i,2),E=s[0],f=s[1],p=function(){f(!0)};return!c&&E&&f(!1),l.a.createElement(b.a,{show:c&&!E,onHide:p},l.a.createElement(b.a.Header,{closeButton:!0},l.a.createElement(b.a.Title,null,t)),l.a.createElement(b.a.Body,null,a),l.a.createElement(b.a.Footer,null,l.a.createElement(d.a,{variant:"primary",onClick:p},r),u?l.a.createElement(d.a,{variant:"secondary",onClick:m},u):l.a.createElement(l.a.Fragment,null)))},g=a(43),y=a(45),k=function(e){var t=e.persons,a=e.deleteCallBack;console.log(t.map((function(e){return e._id+":"+e.name})).join(" , "));var r=Object(n.useState)(!1),c=Object(o.a)(r,2),u=c[0],m=c[1],i=Object(n.useState)(),s=Object(o.a)(i,2),E=s[0],f=s[1],p=Object(n.useState)(""),h=Object(o.a)(p,2),v=h[0],k=h[1],O=function(){return m(!1)},S=function(e){if(e.currentTarget){var a=e.currentTarget.id,n=t.find((function(e){return e._id===a}));f(n),k(n?"".concat(n.name," / ").concat(n.tel):""),m(!0)}};return l.a.createElement(l.a.Fragment,null,l.a.createElement(b.a,{show:u,onHide:O,animation:!1},l.a.createElement(b.a.Body,null,"Delete",l.a.createElement("em",null," ",v," ")," ?"),l.a.createElement(b.a.Footer,null,l.a.createElement(d.a,{variant:"danger",onClick:function(){E&&E._id&&a(E._id),O()}},"Delete"),l.a.createElement(d.a,{variant:"secondary",onClick:O},"Cancel"))),l.a.createElement(g.a,{striped:!0,hover:!0,bordered:!0,responsive:"sm",size:"sm"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Name"),l.a.createElement("td",null,"Number"),l.a.createElement("td",null))),l.a.createElement("tbody",null,t.map((function(e){return l.a.createElement("tr",{key:e._id},l.a.createElement("th",null,e.name),l.a.createElement("td",null,e.tel),l.a.createElement("td",null,l.a.createElement(d.a,{size:"sm",variant:"light",id:e._id,onClick:S},l.a.createElement(y.a,null))))})))))},O=function(){console.log("useState");var e=Object(n.useState)([]),t=Object(o.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)("NONE"),u=Object(o.a)(c,2),b=u[0],g=u[1],y=Object(n.useState)(),O=Object(o.a)(y,2),S=O[0],j=O[1],B="http://localhost:3000/"===window.location.href?"http://localhost:3001/api/persons/":"/api/persons/";console.log("Backend api: ".concat(B));console.log("useEffect");var x=function(){var e=document.getElementById("input-name"),t=document.getElementById("input-tel"),n=e.value.trim(),l=t.value.trim();if(h(n,a))j({name:n,tel:l}),g("NAME_EXISTS"),e.focus(),e.value="";else if(function(e,t){return t.map((function(e){return e.tel})).includes(e)}(l,a))j({name:n,tel:l}),g("TEL__EXISTS"),t.focus(),t.value="";else{if(n.length>0)if(l.length>0){var r={name:n,tel:l};e.value="",t.value="",m.a.post(B,r).then((function(t){console.log("created to database: "+t.statusText),N(),e.focus()})).catch((function(e){alert("Backend "+e)}))}else t.focus();else e.focus();g("NONE")}},C=function(e){g("NONE"),"Enter"===e.key&&x()},N=function(){var e=document.getElementById("search-box");!function(e){var t=e&&""!==e?e:"_";console.log("readPersons: ".concat(t," ")),m.a.get("".concat(B,"search/").concat(t)).then((function(e){console.log("read response from db: "+e.statusText),r(e.data)})).catch((function(e){alert("Backend "+e)}))}(e.value.trim()),e.focus()};Object(n.useEffect)(N,[]);var w=l.a.createElement("div",null,"Name ",l.a.createElement("em",null,null===S||void 0===S?void 0:S.name)," already exists in directory"),T=l.a.createElement("div",null,"Phone number ",l.a.createElement("em",null,null===S||void 0===S?void 0:S.tel)," already exists in directory");return console.log("render"),l.a.createElement(i.a,{style:{maxWidth:"600px"}},l.a.createElement(s.a,null,l.a.createElement(E.a,null,l.a.createElement("p",null),l.a.createElement(v,{title:"Duplicate entry",main:"NAME_EXISTS"===b?w:T,button:"Ok",show:"NONE"!==b}))),l.a.createElement(s.a,null,l.a.createElement(E.a,null,l.a.createElement("h2",null,"Telephone Directory"))),l.a.createElement(s.a,null,l.a.createElement(E.a,null,l.a.createElement(f.a.Group,null,l.a.createElement(s.a,null,l.a.createElement(E.a,null,l.a.createElement(f.a.Label,null,"New name"),l.a.createElement(f.a.Control,{size:"sm",id:"input-name",type:"text",placeholder:"Enter new name",onKeyDown:C}))),l.a.createElement(s.a,null,l.a.createElement(E.a,null,l.a.createElement(f.a.Label,null,"Phone number"),l.a.createElement(f.a.Control,{size:"sm",id:"input-tel",type:"tel",placeholder:"Enter phone number",onKeyDown:C})))))),l.a.createElement(s.a,null,l.a.createElement(E.a,{xs:{span:3,offset:3}},l.a.createElement(d.a,{size:"sm",onClick:x},"Add\xa0person")),l.a.createElement(E.a,{xs:{span:3,offset:1}},l.a.createElement(p.a,null,l.a.createElement(p.a.Toggle,{size:"sm",variant:"info",id:"dropdown-basic"},"Documentation"),l.a.createElement(p.a.Menu,null,l.a.createElement(p.a.Item,{href:"/client-doc"},"Client documentation"),l.a.createElement(p.a.Item,{href:"/server-doc"},"Server documentation"))))),l.a.createElement(s.a,null,l.a.createElement(E.a,null,l.a.createElement(f.a.Group,null,l.a.createElement(s.a,null,l.a.createElement(E.a,null,l.a.createElement(f.a.Label,null,"Search"),l.a.createElement(f.a.Control,{id:"search-box",type:"text",placeholder:"Start typing to limit search results",onKeyUp:N})))))),l.a.createElement(s.a,null,l.a.createElement(E.a,null,l.a.createElement("p",null))),l.a.createElement(s.a,null,l.a.createElement(E.a,null,l.a.createElement(k,{persons:a,deleteCallBack:function(e){console.log("deletePerson: "+e),m.a.delete(B+e).then((function(t){console.log("deleted response from db: "+t.statusText),r(a.filter((function(t){return t._id!==e})))})).catch((function(e){alert("Backend "+e)}))}}))))};c.a.render(l.a.createElement(O,null),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.246f29fe.chunk.js.map