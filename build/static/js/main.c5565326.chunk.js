/*! For license information please see main.c5565326.chunk.js.LICENSE.txt */
(this["webpackJsonpphonebook-front"]=this["webpackJsonpphonebook-front"]||[]).push([[0],{31:function(e,t,a){e.exports=a(57)},57:function(e,t,a){"use strict";a.r(t);a(32);var n=a(0),l=a.n(n),r=a(13),c=a.n(r),o=a(7),u=a(14),m=a.n(u),i=a(29),s=a(15),d=a(11),E=a(9),f=a(12),p=function(e,t){return t.map((function(e){return e.name})).includes(e)},h=a(8),b=function(e){var t=e.title,a=e.main,r=e.button,c=e.show,u=e.okButton,m=e.okCallBack,i=Object(n.useState)(!1),s=Object(o.a)(i,2),d=s[0],f=s[1],p=function(){f(!0)};return!c&&d&&f(!1),l.a.createElement(h.a,{show:c&&!d,onHide:p},l.a.createElement(h.a.Header,{closeButton:!0},l.a.createElement(h.a.Title,null,t)),l.a.createElement(h.a.Body,null,a),l.a.createElement(h.a.Footer,null,l.a.createElement(E.a,{variant:"primary",onClick:p},r),u?l.a.createElement(E.a,{variant:"secondary",onClick:m},u):l.a.createElement(l.a.Fragment,null)))},v=a(28),k=a(30),y=function(e){var t=e.persons,a=e.deleteCallBack;console.log(t.map((function(e){return e.id+":"+e.name})).join(" , "));var r=Object(n.useState)(!1),c=Object(o.a)(r,2),u=c[0],m=c[1],i=Object(n.useState)(),s=Object(o.a)(i,2),d=s[0],f=s[1],p=Object(n.useState)(""),b=Object(o.a)(p,2),y=b[0],g=b[1],O=function(){return m(!1)},w=function(e){if(e.currentTarget){var a=e.currentTarget.id,n=t.find((function(e){return e.id===a}));f(n),g(n?"".concat(n.name," / ").concat(n.tel):""),m(!0)}};return l.a.createElement(l.a.Fragment,null,l.a.createElement(h.a,{show:u,onHide:O,animation:!1},l.a.createElement(h.a.Body,null,"Delete",l.a.createElement("em",null," ",y," ")," ?"),l.a.createElement(h.a.Footer,null,l.a.createElement(E.a,{variant:"danger",onClick:function(){d&&d.id&&a(d.id),O()}},"Delete"),l.a.createElement(E.a,{variant:"secondary",onClick:O},"Cancel"))),l.a.createElement(v.a,{striped:!0,hover:!0,bordered:!0,responsive:"sm",size:"sm"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Name"),l.a.createElement("td",null,"Number"),l.a.createElement("td",null))),l.a.createElement("tbody",null,t.map((function(e){return l.a.createElement("tr",{key:e.id},l.a.createElement("th",null,e.name),l.a.createElement("td",null,e.tel),l.a.createElement("td",null,l.a.createElement(E.a,{size:"sm",variant:"light",id:e.id,onClick:w},l.a.createElement(k.a,null))))})))))},g="/api/persons/";m.a.get(g).then().catch((function(e){g="https://phonebookback.azurewebsites.net/api/persons/",m.a.get(g).then().catch((function(e){g="http://localhost:3001/api/persons/"}))})),console.log("Backend api: ".concat(g));var O=function(){console.log("useState");var e=Object(n.useState)([]),t=Object(o.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)("NONE"),u=Object(o.a)(c,2),h=u[0],v=u[1],k=Object(n.useState)(),O=Object(o.a)(k,2),w=O[0],j=O[1];console.log("useEffect"),Object(n.useEffect)((function(){console.log("readPersons"),m.a.get(g).then((function(e){console.log("read response from db: "+e.statusText),r(e.data)})).catch((function(e){throw alert("Backend "+e),new Error(e)}))}),[]);var N=function(){var e=document.getElementById("input-name"),t=document.getElementById("input-tel"),n=e.value.trim(),l=t.value.trim();if(p(n,a))j({name:n,tel:l}),v("NAME_EXISTS"),e.focus(),e.value="";else if(function(e,t){return t.map((function(e){return e.tel})).includes(e)}(l,a))j({name:n,tel:l}),v("TEL__EXISTS"),t.focus(),t.value="";else{if(n.length>0)if(l.length>0){var c={name:n,tel:l};e.value="",t.value="",e.focus(),m.a.post(g,c).then((function(e){console.log("created to database: "+e.statusText),c.id=e.data.id,r(a.concat(c))})).catch((function(e){throw alert("Backend "+e),new Error(e)}))}else t.focus();else e.focus();v("NONE")}},B=function(e){v("NONE"),"Enter"===e.key&&N()},S=l.a.createElement("div",null,"Name ",l.a.createElement("em",null,null===w||void 0===w?void 0:w.name)," already exists in directory"),T=l.a.createElement("div",null,"Phone number ",l.a.createElement("em",null,null===w||void 0===w?void 0:w.tel)," already exists in directory");return console.log("render"),l.a.createElement(i.a,null,l.a.createElement(b,{title:"Duplicate entry",main:"NAME_EXISTS"===h?S:T,button:"Ok",show:"NONE"!==h}),l.a.createElement(s.a,null,l.a.createElement(d.a,{md:"auto"},l.a.createElement("h2",null,"Telephone Directory"))),l.a.createElement(s.a,null,l.a.createElement(d.a,{md:"auto"},l.a.createElement(f.a.Group,null,l.a.createElement(f.a.Label,null,"New name"),l.a.createElement(f.a.Control,{id:"input-name",type:"text",placeholder:"Enter new name",onKeyDown:B}),l.a.createElement(f.a.Text,{className:"text-muted"},"We'll never say your name aloud."),l.a.createElement(f.a.Label,null,"Phone number"),l.a.createElement(f.a.Control,{id:"input-tel",type:"tel",placeholder:"Enter phone number",onKeyDown:B}),l.a.createElement(f.a.Text,{className:"text-muted"},"Any number-like entry will do.")))),l.a.createElement(s.a,null,l.a.createElement(d.a,{md:"auto"},l.a.createElement(E.a,{onClick:N},"Add"))),l.a.createElement(s.a,null,l.a.createElement(d.a,{md:"auto"},l.a.createElement("p",null))),l.a.createElement(s.a,null,l.a.createElement(d.a,{md:"auto"},l.a.createElement(y,{persons:a,deleteCallBack:function(e){console.log("deletePerson: "+e),m.a.delete(g+e).then((function(t){console.log("deleted response from db: "+t.statusText),r(a.filter((function(t){return t.id!==e})))})).catch((function(e){throw alert("Backend "+e),new Error(e)}))}}))))};c.a.render(l.a.createElement(O,null),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.c5565326.chunk.js.map